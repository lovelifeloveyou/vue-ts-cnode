{"version":3,"sources":["webpack:///./src/pages/detail/detail.vue?60ca","webpack:///./src/pages/detail/detail.vue?5a33","webpack:///./src/pages/detail/detail.vue?93da","webpack:///./src/pages/detail/detail.vue","webpack:///./src/filters/filters.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","topic","_v","tab","_e","_s","title","_f","create_at","attrs","author","loginname","visit_count","is_collect","accessInfo","success","on","decollect","collect","id","domProps","content","replies","length","_l","item","index","key","class","is_uped","avatar_url","$event","ups","reply","replyId","model","value","callback","$$v","reply1","expression","replyCallback1","_m","reply2","replyCallback2","staticRenderFns","$route","params","accesstoken","$store","state","app","fetchTopic","mdrender","options","dispatch","detail","changeSider","reply_id","services","then","data","error","console","log","signIn","topic_id","deCollect","self","Dialog","open","showInput","inputPlaceholder","confirmButtonText","confirmCallBack","Warning","info","close","window","localStorage","setItem","cancelCallBack","showInfo","isAuthor","name","username","topicId","undefined","filters","v","tag","fromNow","component","time","returnTime","now","Date","last","latToNow","getTime","Math","round"],"mappings":"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","file":"static/js/chunk-25f9e9b2.6a75635d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"header topic_header\"},[_c('span',{staticClass:\"topic_full_title\"},[(_vm.topic.top)?_c('span',{staticClass:\"put_top\"},[_vm._v(\"置顶 \")]):(_vm.topic.good)?_c('span',{staticClass:\"put_good\"},[_vm._v(\"精华 \")]):(_vm.topic.tab === 'share')?_c('span',{staticClass:\"topiclist-tab\"},[_vm._v(\"分享 \")]):(_vm.topic.tab === 'ask')?_c('span',{staticClass:\"topiclist-tab\"},[_vm._v(\"问答 \")]):(_vm.topic.tab === 'job')?_c('span',{staticClass:\"topiclist-tab\"},[_vm._v(\"工作 \")]):(_vm.topic.tab === 'dev')?_c('span',{staticClass:\"topiclist-tab\"},[_vm._v(\"测试 \")]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.topic.title)+\" \")]),_c('div',{staticClass:\"changes\"},[_c('span',[_vm._v(\" 发布于 \"+_vm._s(_vm._f(\"fromNow\")(_vm.topic.create_at))+\" \")]),_c('span',[_vm._v(\" 作者 \"),_c('router-link',{attrs:{\"to\":'/user/' + (_vm.topic.author &&_vm.topic.author.loginname)}},[_vm._v(_vm._s(_vm.topic.author && _vm.topic.author.loginname))])],1),_c('span',[_vm._v(\" \"+_vm._s(_vm.topic.visit_count)+\" 次浏览 \")]),_c('span',[_vm._v(\" 来自 \"+_vm._s(_vm._f(\"tab\")(_vm.topic.tab))+\" \")]),(_vm.topic.is_collect && _vm.accessInfo.success)?_c('input',{staticClass:\"span-common  pull-right collect_btn\",attrs:{\"type\":\"submit\",\"value\":\"取消收藏\",\"action\":\"de_collect\"},on:{\"click\":_vm.decollect}}):_vm._e(),(!_vm.topic.is_collect && _vm.accessInfo.success)?_c('input',{staticClass:\"span-common span-success pull-right collect_btn\",attrs:{\"type\":\"submit\",\"value\":\"收藏\",\"action\":\"collect\"},on:{\"click\":_vm.collect}}):_vm._e()]),(_vm.topic.author && _vm.topic.author.loginname === _vm.accessInfo.loginname)?_c('div',{attrs:{\"id\":\"manage_topic\"}},[_c('router-link',{attrs:{\"to\":'/create/' + _vm.id}},[_c('i',{staticClass:\"fa fa-lg fa-pencil-square-o\",attrs:{\"title\":\"编辑\"}})])],1):_vm._e()]),_c('div',{staticClass:\"inner topic\"},[_c('div',{staticClass:\"topic_content\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.topic.content)}})])])]),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"header\"},[_c('span',{staticClass:\"col_fade\"},[_vm._v(_vm._s(_vm.topic.replies && _vm.topic.replies.length)+\" 回复\")])]),_vm._l((_vm.topic.replies),function(item,index){return _c('div',{key:index,class:['cell reply_area reply_item', {'reply_highlight': item.is_uped}],attrs:{\"reply_id\":item.id,\"reply_to_id\":\"\",\"id\":item.id}},[_c('div',{staticClass:\"author_content\"},[_c('router-link',{staticClass:\"user_avatar\",attrs:{\"to\":'/user/' + item.author.loginname}},[_c('img',{attrs:{\"src\":item.author.avatar_url,\"alt\":\"\",\"title\":\"\"}})]),_c('div',{staticClass:\"user_info\"},[_c('router-link',{staticClass:\"dark reply_author\",attrs:{\"to\":'/user/' + item.author.loginname}},[_vm._v(_vm._s(item.author.loginname))]),_c('a',{staticClass:\"reply_time\",attrs:{\"href\":'#' + item.id}},[_vm._v(_vm._s(index + 1)+\"楼•\"+_vm._s(_vm._f(\"fromNow\")(item.create_at)))]),(item.author.loginname === _vm.topic.author.loginname)?_c('span',{staticClass:\"reply_by_author\"},[_vm._v(\"作者\")]):_vm._e()],1),_c('div',{staticClass:\"user_action\"},[_c('span',[_c('i',{class:['fa up_btn fa-thumbs-o-up', {'uped': item.is_uped}],attrs:{\"title\":\"喜欢\"},on:{\"click\":function($event){return _vm.ups(item.id)}}}),_c('span',{staticClass:\"up-count\"},[_vm._v(\" \"+_vm._s(item.ups ? item.ups.length : 0)+\" \")])]),(_vm.accessInfo.success)?_c('span',[_vm._v(\" \"),_c('i',{staticClass:\"fa fa-reply reply2_btn\",attrs:{\"title\":\"回复\"},on:{\"click\":function($event){return _vm.reply(item.id, item.author.loginname)}}})]):_vm._e()])],1),_c('div',{staticClass:\"reply_content from-i5ting\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(item.content)}})]),_c('div',{staticClass:\"clearfix\"},[_c('div',{staticClass:\"reply2_area\"},[(_vm.replyId === item.id)?_c('div',{staticClass:\"markdown_editor in_editor\"},[_c('div',{staticClass:\"markdown_in_editor\"},[_c('mavon-editor',{attrs:{\"subfield\":false,\"placeholder\":' '},model:{value:(_vm.reply1),callback:function ($$v) {_vm.reply1=$$v},expression:\"reply1\"}}),_c('div',{staticClass:\"editor_buttons\"},[_c('input',{staticClass:\"span-primary submit_btn\",attrs:{\"type\":\"button\",\"value\":\"回复\"},on:{\"click\":_vm.replyCallback1}})])],1)]):_vm._e()])])])}),(_vm.accessInfo.success)?_c('div',{staticClass:\"panel\"},[_vm._m(0),_c('div',{staticClass:\"inner reply\"},[_c('div',{staticClass:\"markdown_editor in_editor\"},[_c('div',{staticClass:\"markdown_in_editor\"},[_c('mavon-editor',{attrs:{\"subfield\":false,\"placeholder\":' '},model:{value:(_vm.reply2),callback:function ($$v) {_vm.reply2=$$v},expression:\"reply2\"}}),_c('div',{staticClass:\"editor_buttons\"},[_c('input',{staticClass:\"span-primary submit_btn\",attrs:{\"type\":\"button\",\"value\":\"回复\"},on:{\"click\":_vm.replyCallback2}})])],1)])])]):_vm._e()],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('span',{staticClass:\"col_fade\"},[_vm._v(\"添加回复\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport Component from 'vue-class-component';\nimport { fromNow } from '../../filters/filters';\nimport Dialog from '../../components/Dialog/index';\nimport Warning from '../../components/Warning/index';\nimport services from '../../services/services';\n\n@Component({\n    filters: {\n        tab(v: string): string {\n            let tag = '';\n            switch(v) {\n                case 'share':\n                    tag = '分享';\n                    break;\n                case 'ask':\n                    tag = '问答';\n                    break;\n                case 'job':\n                    tag = '工作';\n                    break;\n                case 'dev':\n                    tag = '测试';\n                    break;\n                default:\n                    break;\n\n            }\n            return tag;\n        },\n        fromNow,\n    }\n})\nexport default class Home extends Vue {\n    id: string = '';\n    replyId: string = '';\n    reply1: string = '';\n    reply2: string = '';\n    get topic (): object {\n        return this.$store.state.detail.topic;\n    }\n    get accessInfo (): object {\n        return this.$store.state.app.accessInfo;\n    }\n    created (): void {\n        let id = this.$route.params.id;\n        this.id = id;\n        const { accesstoken } = this.$store.state.app;\n        this.fetchTopic({\n            id,\n            accesstoken,\n            mdrender: true\n        });\n    }\n    async fetchTopic (options: {id: string; accesstoken: string; mdrender: boolean}) {\n        await this.$store.dispatch('getTopic', options);\n        // 侧边栏\n        const topic = this.$store.state.detail.topic;\n        this.changeSider(true, true, topic.author.loginname);\n    }\n    ups (reply_id: string): void {\n        const accessInfo = this.$store.state.app.accessInfo;\n        const accesstoken = this.$store.state.app.accesstoken;\n        if (accessInfo.success) {\n            const options = {\n                reply_id,\n                accesstoken,\n            };\n            services.ups(options).then((data) => {\n                const id = this.$route.params.id;\n                this.fetchTopic({\n                    id,\n                    accesstoken,\n                    mdrender: true\n                });\n            }, error => {\n                console.log(error);\n            });\n        } else {\n            this.signIn();\n        }\n    }\n    collect (): void {\n        const { accessInfo, accesstoken } = this.$store.state.app;\n        const id = this.$route.params.id;\n        const options = {\n            topic_id: id,\n            accesstoken,\n        };\n        if (accessInfo.success) {\n            services.collect(options).then((data) => {\n                this.fetchTopic({\n                    id,\n                    accesstoken,\n                    mdrender: true\n                });\n            }, error => {\n                console.log(error);\n            })\n        } else {\n            this.signIn();\n        }\n    }\n    decollect (): void {\n        const id = this.$route.params.id;\n        const { accessInfo, accesstoken } = this.$store.state.app;\n        const options = {\n            topic_id: id,\n            accesstoken,\n        };\n        if (accessInfo.success) {\n            services.deCollect(options).then((data) => {\n                this.fetchTopic({\n                    id,\n                    accesstoken,\n                    mdrender: true\n                });\n            }, error => {\n                console.log(error);\n            });\n        } else {\n            this.signIn();\n        }\n    }\n    signIn (): void {\n        let self = this;\n        Dialog.open({\n            showInput: true,\n            inputPlaceholder: '请输入accesstoken',\n            confirmButtonText: '登陆',\n            confirmCallBack: async function (accesstoken: string) {\n                if (accesstoken === '' || !accesstoken) {\n                    Warning.info('accesstoken不能为空！');\n                } else {\n                    await self.$store.dispatch('accesstoken', {accesstoken});\n                    let accessInfo = self.$store.state.app.accessInfo;\n                    // const { accessInfo, changeAccesstoken, getInfo, getMessage } = self.$props;\n                    if (accessInfo.success) {\n                        self.$store.dispatch('changeAccesstoken', {accesstoken});\n                        // await getMessage({\n                        //     accesstoken,\n                        //     mdrender: true\n                        // });\n                        // await getInfo({\n                        //     username: accessInfo.loginname\n                        // });\n                        Dialog.close();\n                        Warning.info('登录成功！');\n                        window.localStorage.setItem('accesstoken', accesstoken);\n                    } else {\n                        Warning.info('accesstoken不正确，请重新输入！');\n                    }\n                }\n            },\n            cancelCallBack(accesstoken: string) {\n                Dialog.close();\n            },\n        });\n    }\n    changeSider (showInfo: boolean, isAuthor: boolean, name: string): void {\n        this.$store.dispatch('authorOrNot', {\n            showInfo,\n            isAuthor,\n        });\n        this.$store.dispatch('getInfo', {\n            username: name\n        });\n    }\n    reply(reply_id: string, loginname: string) {\n        this.replyId = this.replyId === '' ? reply_id : '';\n        this.reply1 = `@${loginname} `;\n    }\n    replyCallback1 () {\n        const { accesstoken } = this.$store.state.app;\n        let options = {\n            reply_id: this.replyId,\n            accesstoken,\n            content: this.reply1,\n            topicId: this.id,\n        };\n        services.replies(options).then((data: any) => {\n            if(data.success) {\n                this.fetchTopic({\n                    id: this.id,\n                    accesstoken,\n                    mdrender: true\n                });\n                this.reply1 = '';\n                this.replyId = '';\n            }\n        }, error => {\n            console.log(error);\n        });\n    }\n    replyCallback2 () {\n        const { accesstoken } = this.$store.state.app;\n        let options = {\n            accesstoken,\n            content: this.reply2,\n            topicId: this.id,\n            reply_id: undefined,\n        };\n        services.replies(options).then((data: any) => {\n            if(data.success) {\n                this.fetchTopic({\n                    id: this.id,\n                    accesstoken,\n                    mdrender: true\n                });\n                this.reply2 = '';\n            }\n        }, error => {\n            console.log(error);\n        });\n    }\n};\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_ts-loader@6.2.2@ts-loader/index.js??ref--13-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_ts-loader@6.2.2@ts-loader/index.js??ref--13-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=3dc87784&\"\nimport script from \"./detail.vue?vue&type=script&lang=ts&\"\nexport * from \"./detail.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export function fromNow (time: string) {\r\n    let now = new Date();\r\n    let last = new Date(time);\r\n    let latToNow = now.getTime() - last.getTime();\r\n    let returnTime;\r\n    if (latToNow / 1000 < 60) {\r\n        returnTime = `${Math.round(latToNow / 1000)} 秒前`;\r\n    } else if (latToNow / 1000 >= 60 && latToNow / 1000 < 3600) {\r\n        returnTime = `${Math.round(latToNow / 1000 / 60)} 分钟前`;\r\n    } else if (latToNow / 1000 >= 3600 && latToNow / 1000 < 3600 * 24) {\r\n        returnTime = `${Math.round(latToNow / 1000 / 60 / 60)} 小时前`;\r\n    } else if (latToNow / 1000 >= 3600 * 24 && latToNow / 1000 < 3600 * 24 * 30) {\r\n        returnTime = `${Math.round(latToNow / 1000 / 60 / 60 / 24)} 天前`;\r\n    } else if (latToNow / 1000 >= 3600 * 24 * 30 && latToNow / 1000 < 3600 * 24 * 365) {\r\n        returnTime = `${Math.round(latToNow / 1000 / 60 / 60 / 24 / 30)} 月前`;\r\n    } else if (latToNow / 1000 >= 3600 * 24 * 365) {\r\n        returnTime = `${Math.round(latToNow / 1000 / 60 / 60 / 24 / 365)} 年前`;\r\n    }\r\n    return returnTime;\r\n}\r\n"],"sourceRoot":""}