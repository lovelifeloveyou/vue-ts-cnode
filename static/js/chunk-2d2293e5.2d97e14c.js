(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2293e5"],{dd2a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"panel"},[t._m(0),a("div",{staticClass:"inner post"},[a("form",{attrs:{id:"create_topic_form"}},[a("fieldset",[a("span",{staticClass:"tab-selector"},[t._v("选择版块：")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tab,expression:"tab"}],attrs:{name:"tab",id:"tab-value"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.tab=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("请选择")]),a("option",{attrs:{value:"share"}},[t._v("分享")]),a("option",{attrs:{value:"ask"}},[t._v("问答")]),a("option",{attrs:{value:"job"}},[t._v("招聘")]),a("option",{attrs:{value:"dev"}},[t._v("客户端测试")])]),a("span",{attrs:{id:"topic_create_warn"}}),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticStyle:{width:"85%"},attrs:{type:"text",autoFocus:"",name:"title",placeholder:"标题字数 10 字以上"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("div",{staticClass:"markdown_editor in_editor"},[a("div",{staticClass:"markdown_in_editor"},[a("mavon-editor",{attrs:{subfield:!1,placeholder:" "},on:{change:t.changeContent},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),a("div",{staticClass:"editor_buttons"},[a("input",{staticClass:"span-primary submit_btn",attrs:{type:"button",value:"提交"},on:{click:t.create}})])],1)])])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("ol",{staticClass:"breadcrumb"},[a("li",[a("a",{attrs:{href:"/"}},[t._v("主页")]),a("span",{staticClass:"divider"},[t._v("/")])]),a("li",{staticClass:"active"},[t._v("发布话题")])])])}],s=a("1da1"),r=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),l=(a("96cf"),a("9ab4")),p=a("2b0e"),h=a("2fe1"),v=a("1e60"),d=a("a3e1"),f=function(t){Object(o["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.id="",t.tab="",t.title="",t.value="",t.content="",t}return Object(c["a"])(a,[{key:"changeContent",value:function(t,e){this.content=e}},{key:"created",value:function(){var t=this.$route.params.id;if(this.id=t,"new"!==t){var e=this.$store.state.app.accesstoken;this.fetchTopic({id:t,accesstoken:e,mdrender:!1})}this.changeSider()}},{key:"fetchTopic",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getTopic",e);case 2:a=this.$store.state.detail.topic,this.value=a.content,this.title=a.title,this.tab=a.tab;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"changeSider",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=window.localStorage.getItem("accesstoken"),t.next=3,this.$store.dispatch("accesstoken",{accesstoken:e});case 3:a=this.$store.state.app.accessInfo,n=!!a.success,this.$store.dispatch("authorOrNot",{showInfo:n,isAuthor:!1}),a&&""!==a.loginname&&a.loginname&&this.$store.dispatch("getInfo",{username:a.loginname});case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"create",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$store.state.app.accesstoken,{title:this.title,accesstoken:e,tab:this.tab,content:this.value},""!==this.tab){t.next=7;break}return v["a"].info("请选择版块"),t.abrupt("return");case 7:if(""!==this.title){t.next=12;break}return v["a"].info("标题不能为空！"),t.abrupt("return");case 12:if(""!==this.content){t.next=15;break}return v["a"].info("内容不能为空！"),t.abrupt("return");case 15:"new"===this.id?d["a"].newTopics({title:this.title,accesstoken:e,tab:this.tab,content:this.value}).then((function(t){t.success&&(a.$router.push("/home"),v["a"].info("发布成功！"))}),(function(t){console.log(t)})):d["a"].update({title:this.title,accesstoken:e,tab:this.tab,content:this.value,topic_id:this.id}).then((function(t){t.success&&(a.$router.push("/home"),v["a"].info("发布成功！"))}),(function(t){console.log(t)}));case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(p["default"]);f=Object(l["a"])([Object(h["b"])({})],f);var b=f,m=b,k=a("2877"),w=Object(k["a"])(m,n,i,!1,null,null,null);e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d2293e5.2d97e14c.js.map